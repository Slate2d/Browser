# antygui-minimal

Минимально рабочий GUI-проект для менеджмента профилей и запуска браузеров на базе Playwright/patchright.

## Возможности
- Создание/редактирование/удаление профилей (имя + прокси).
- Запуск/остановка профилей в отдельных процессах (изоляция).
- WebSocket-обновления статуса (running/stopped/crashed) и текущего URL.
- Персистентные сессии: у каждого профиля своя папка с данными в `profiles/<profile_id>`.
- Простая статическая веб-страница без сборки.

## Запуск
1. Python 3.11+
2. Установка зависимостей:
   ```bash
   pip install -r requirements.txt
   ```
3. Установить браузеры Playwright (если используете `playwright`):
   ```bash
   python -m playwright install chromium
   ```
   Если используете `patchright`, установите его и соответствующие бинарники аналогично вашей сборке. Код пытается сначала импортировать `patchright`, затем `playwright`.
4. Запустить сервер:
   ```bash
   uvicorn server:app --reload --port 8000
   ```
5. Открыть UI: http://localhost:8000

## Прокси формат
Поддерживается формат: `scheme://host:port` или `scheme://user:pass@host:port`, где `scheme` например `http`, `https`, `socks5`.

## Структура
- `server.py` — FastAPI + WebSocket, REST API и управление воркерами.
- `worker.py` — отдельный процесс, который поднимает браузер и отправляет heartbeats.
- `db.py` — SQLite-хелперы.
- `static/` — фронтенд (index.html + app.js + styles.css).
- `profiles/` — директории пользовательских профилей (персистентные данные браузера).
- `logs/` — логи воркеров.

## Примечания
- Это учебный минималистичный старт. В продакшене добавьте аутентификацию к API, ротацию логов, контроль лимитов ресурсов и т.д.
